<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />
    <link
      rel="icon"
      href="{{ url_for('static', filename='images/Iconos/Logo.ico') }}"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
      crossorigin="anonymous"
    />
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>Biblioteca Alexandria</title>
  </head>

  <body>
    <header>
      <div class="menu container">
        <a href="#top"
          ><img
            src="{{ url_for('static', filename='images/Iconos/Logo.ico') }}"
            class="logo"
            alt="Logo"
        /></a>
        <input type="checkbox" id="menu" />
        <label for="menu">
          <img
            src="{{ url_for('static', filename='images/menu.png') }}"
            class="menu-icono"
            alt="Men√∫"
          />
        </label>
        <nav class="navbar">
          <ul>
            <li><a href="#mu-inicio">Inicio</a></li>
            <li><a href="#catego">Categor√≠as</a></li>
            <li><a href="#Acerca-de">Acerca de</a></li>
            <li><a href="#contactanos">Cont√°ctanos</a></li>
            <li>
              <a href="{{ url_for('login_page') }}" class="btn-1 btn-link"
                >Iniciar Sesi√≥n</a
              >
            </li>
            <li>
              <a
                href="{{ url_for('login_page') }}#register"
                class="btn-2 btn-link"
                >Registrarse</a
              >
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <main role="main">
      <section id="mu-inicio" class="zona-inicio">
        <div class="inicio-content container">
          <div class="hero-content">
            <div class="hero-texto">
              <img
                src="{{ url_for('static', filename='images/Iconos/T√≠tulo.png') }}"
                alt="Biblioteca Alexandria"
                class="logo-texto"
              />
              <p>
                Descubre, lee y crece<br />con nuestra<br /><strong
                  >biblioteca virtual</strong
                >
              </p>
            </div>
            <div class="hero-imagen">
              <img
                src="{{ url_for('static', filename='images/Iconos/LibreriaCoraz√≥n.png') }}"
                alt="Coraz√≥n libros"
                class="logo-heart"
              />
            </div>
          </div>
        </div>
      </section>

      <!-- Contadores -->
      <section id="mu-counter">
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <div class="mu-counter-area">
                <div class="mu-counter-block">
                  <div class="row">
                    <!-- Start Single Counter -->
                    <div class="col-md-3 col-sm-6">
                      <div class="mu-single-counter">
                        <i
                          class="fa-solid fa-file-lines"
                          aria-hidden="true"
                        ></i>
                        <div class="counter-value" data-count="650">650</div>
                        <h5 class="mu-counter-name">Pages</h5>
                      </div>
                    </div>
                    <!-- / Single Counter -->

                    <!-- Start Single Counter -->
                    <div class="col-md-3 col-sm-6">
                      <div class="mu-single-counter">
                        <i class="fa-solid fa-book-open" aria-hidden="true"></i>
                        <div class="counter-value" data-count="20">20</div>
                        <h5 class="mu-counter-name">Total Books</h5>
                      </div>
                    </div>
                    <!-- / Single Counter -->

                    <!-- Start Single Counter -->
                    <div class="col-md-3 col-sm-6">
                      <div class="mu-single-counter">
                        <i class="fa fa-users" aria-hidden="true"></i>
                        <div class="counter-value" data-count="10">10</div>
                        <h5 class="mu-counter-name">Active Readers</h5>
                      </div>
                    </div>
                    <!-- / Single Counter -->

                    <!-- Start Single Counter -->
                    <div class="col-md-3 col-sm-6">
                      <div class="mu-single-counter">
                        <i class="fa fa-trophy" aria-hidden="true"></i>
                        <div class="counter-value" data-count="03">3</div>
                        <h5 class="mu-counter-name">Got Awards</h5>
                      </div>
                    </div>
                    <!-- / Single Counter -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- End Counter -->

      <!-- Categories Section -->
      <section id="catego" class="categories">
        <div class="cat-overlay">
          <div class="cat-header">
            <h2>Categor√≠as</h2>
            <p>
              Explora nuestras categor√≠as de libros y encuentra tu pr√≥xima
              lectura.
            </p>
          </div>

          <div class="cat-grid">
            <div class="books">
              <div class="book-img">
                <img
                  src="{{ url_for('static', filename='images/Iconos/Fantasia.ico') }}"
                  alt
                />
              </div>
              <h4>Fantas√≠a</h4>
              <p>Sum√©rgete en mundos imaginarios y relatos cautivadores.</p>
            </div>

            <div class="books">
              <div class="book-img">
                <img
                  src="{{ url_for('static', filename='images/Iconos/Comics.ico') }}"
                  alt
                />
              </div>
              <h4>C√≥mics</h4>
              <p>Superh√©roes y aventuras ilustradas.</p>
            </div>

            <div class="books">
              <div class="book-img">
                <img
                  src="{{ url_for('static', filename='images/Iconos/Romance.ico') }}"
                  alt
                />
              </div>
              <h4>Romance</h4>
              <p>Historias de amor que tocan el coraz√≥n.</p>
            </div>

            <div class="books">
              <div class="book-img">
                <img
                  src="{{ url_for('static', filename='images/Iconos/Poema.png') }}"
                  alt
                />
              </div>
              <h4>Poes√≠a</h4>
              <p>Versos que despiertan emociones.</p>
            </div>

            <div class="books">
              <div class="book-img">
                <img
                  src="{{ url_for('static', filename='images/Iconos/CienciaFicci√≥n.png') }}"
                  alt
                />
              </div>
              <h4>Ciencia Ficci√≥n</h4>
              <p>Explora futuros posibles y tecnolog√≠a avanzada.</p>
            </div>

            <div class="books">
              <div class="book-img">
                <img
                  src="{{ url_for('static', filename='images/Iconos/Terror.png') }}"
                  alt
                />
              </div>
              <h4>Terror</h4>
              <p>Relatos oscuros que te mantendr√°n alerta.</p>
            </div>

            <div class="books">
              <div class="book-img">
                <img
                  src="{{ url_for('static', filename='images/Iconos/Infantil.ico') }}"
                  alt
                />
              </div>
              <h4>Infantil</h4>
              <p>Lecturas divertidas para los m√°s peque√±os.</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Nuevos Libros Section -->
      <section class="nuevos-libros">
        <div class="nuevos-overlay">
          <div class="nuevos-header">
            <h2>Nuevos Libros</h2>
            <p>Descubre las √∫ltimas novedades en nuestra biblioteca.</p>
          </div>

          <div class="libros-grid">
            <div class="libro-item">
              <span class="libro-label">‚Äì √öltima publicaci√≥n ‚Äì</span>
              <img
                src="{{ url_for('static', filename='images/Libros/Demian.jpg') }}"
                alt="Demian"
              />
              <h4>Demian</h4>
              <a href="{{ url_for('login_page') }}" class="btn-ver">Ver m√°s</a>
            </div>

            <div class="libro-item">
              <span class="libro-label">‚Äì √öltima publicaci√≥n ‚Äì</span>
              <img
                src="{{ url_for('static', filename='images/Libros/Frankenstein.jpg') }}"
                alt="Frankenstein"
              />
              <h4>Frankenstein</h4>
              <a href="{{ url_for('login_page') }}" class="btn-ver">Ver m√°s</a>
            </div>

            <div class="libro-item">
              <span class="libro-label">‚Äì √öltima publicaci√≥n ‚Äì</span>
              <img
                src="{{ url_for('static', filename='images/Libros/Jekyll&Hyde.jpeg') }}"
                alt="Jekyll & Hyde"
              />
              <h4>Jekyll & Hyde</h4>
              <a href="{{ url_for('login_page') }}" class="btn-ver">Ver m√°s</a>
            </div>

            <div class="libro-item">
              <span class="libro-label">‚Äì √öltima publicaci√≥n ‚Äì</span>
              <img
                src="{{ url_for('static', filename='images/Libros/FantasmaOpera.jpg') }}"
                alt="FantasmaOpera"
              />
              <h4>El Fantasma de la Opera</h4>
              <a href="{{ url_for('login_page') }}" class="btn-ver">Ver m√°s</a>
            </div>
            <!-- Puedes agregar m√°s libros aqu√≠ -->
          </div>
        </div>
      </section>

      <!-- Video Section -->
      <section class="video-section">
        <div class="video-overlay">
          <div class="video-content">
            <h2 class="titulo-con-linea">Video</h2>
            <p>
              Descubre c√≥mo nuestra biblioteca transforma la experiencia de
              lectura.
            </p>
            <video controls>
              <source
                src="{{ url_for('static', filename='Videos/presentacion.mp4') }}"
                type="video/mp4"
              />
            </video>
          </div>
        </div>
      </section>

      <!---Acerca de section ----->
      <section id="Acerca-de">
        <div class="set-row">
          <img
            src="{{ url_for('static', filename='images/about-us.png') }}"
            alt
          />

          <div class="about-content">
            <h2>Acerca de Nuestra Biblioteca</h2>
            <p>
              La biblioteca virtual Alexandria es una plataforma digital que
              ofrece acceso r√°pido y organizado a una amplia colecci√≥n de
              libros, documentos y recursos acad√©micos. Dise√±ada para facilitar
              el aprendizaje y la investigaci√≥n, permite a estudiantes, docentes
              y usuarios en general consultar material de distintas √°reas del
              conocimiento desde cualquier lugar y en cualquier momento. Su
              interfaz amigable y su sistema de b√∫squeda eficiente la convierten
              en una herramienta fundamental para la educaci√≥n en la era
              digital.
            </p>
          </div>
        </div>
      </section>

      <!-- Rese√±as Section -->
      <section class="reviews">
        <h2 class="reviews-title">Rese√±as</h2>
        <div class="reviews-grid">
          <div class="review">
            <i class="fa-solid fa-quote-left"></i>
            <p class="review-text">
              "una biblioteca es un laberinto de humanidad, donde cada libro es
              un hilo de Ariadna"
            </p>
            <p class="review-author">Carlos Ruiz Zaf√≥n</p>
          </div>

          <div class="review">
            <i class="fa-solid fa-quote-left"></i>
            <p class="review-text">
              "Las bibliotecas son mas que libros; son refugios contra la
              ignorancia"
            </p>
            <p class="review-author">Ray Bradbury</p>
          </div>

          <div class="review">
            <i class="fa-solid fa-quote-left"></i>
            <p class="review-text">
              "Alexandria no guarda libros, guarda llaves... ¬øQue puerta abrir√°s
              hoy?."
            </p>
            <p class="review-author">Adaptacion de Emily Dickinson</p>
          </div>
        </div>
      </section>

      //Contactanos Section//
      <section class="contact-section" id="contactanos">
        <div class="contact-container">
          <div class="contact-form">
            <h2>Cont√°ctenos</h2>
            <form
              class="form"
              id="contact-form"
              method="POST"
              action="/api/usuarios/enviar-mensaje-contacto"
            >
              <input
                type="text"
                name="nombre"
                placeholder="Nombre Completo"
                required
              />
              <input
                type="email"
                name="correo"
                placeholder="Correo Electr√≥nico"
                required
              />
              <textarea
                name="mensaje"
                placeholder="Escribe tu mensaje..."
                required
              ></textarea>
              <button type="submit">ENVIAR</button>
            </form>

            <!-- Aqu√≠ aparecer√° el mensaje -->
            <div
              id="contact-message"
              style="margin-top: 10px; color: white; text-align: center"
            ></div>
          </div>

          <div class="contact-info-wrapper">
            <div class="contact-info">
              <div class="info-card">
                <i class="fas fa-map-marker-alt"></i>
                <h4>Nuestra Oficina Principal</h4>
                <p>Calle 40 #24-100.<br />Tulua, Valle del Cauca, Colombia</p>
              </div>
              <div class="info-card">
                <i class="fas fa-phone"></i>
                <h4>N√∫mero de Tel√©fono</h4>
                <p>
                  316 5894719 <br />315 3803104<br />
                  (llamada gratuita)
                </p>
              </div>
              <div class="info-card">
                <i class="fas fa-envelope"></i>
                <h4>Correo Electr√≥nico</h4>
                <p>
                  <a href="mailto:BiblioAlex@gmail.com"
                    >alexandriabiblioteca611@gmail.com</a
                  >
                </p>
              </div>
            </div>
          </div>
          <img
            src="{{ url_for('static', filename='images/contact.png') }}"
            alt="Ilustraci√≥n de contacto"
          />
        </div>
      </section>
    </main>

    <footer class="footer">
      <div class="container">
        <img
          class="logo-2"
          src="{{ url_for('static', filename='images/Logo2.png') }}"
          alt
        />

        <div class="links">
          <h4>FQA</h4>
          <ul>
            <li><a href="#">¬øC√≥mo funciona?</a></li>
            <li><a href="#">Preguntas frecuentes</a></li>
            <li><a href="#">Soporte t√©cnico</a></li>
            <li><a href="#">T√©rminos y condiciones</a></li>
          </ul>
        </div>

        <div class="links">
          <h4>Pol√≠tica de la tienda</h4>
          <ul>
            <li><a href="#">Privacidad</a></li>
            <li><a href="#">Devoluciones</a></li>
            <li><a href="#">Condiciones</a></li>
            <li><a href="#">Env√≠os</a></li>
          </ul>
        </div>

        <div class="links">
          <h4>Redes Sociales</h4>
          <div class="socials">
            <a href="https://facebook.com" target="_blank"
              ><i class="bx bxl-facebook"></i
            ></a>
            <a href="https://twitter.com" target="_blank"
              ><i class="bx bxl-twitter"></i
            ></a>
            <a href="https://instagram.com" target="_blank"
              ><i class="bx bxl-instagram"></i
            ></a>
          </div>
        </div>
      </div>
    </footer>

    <script src="{{ url_for('static', filename='js/scripts.js') }}"></script>
    <script
      type="text/javascript"
      src="{{ url_for('static', filename='js/counter.js') }}"
    ></script>

    <script>
      // Detectar cuando el contador es visible
      function isInViewport(el) {
        const rect = el.getBoundingClientRect();
        return (
          rect.top >= 0 &&
          rect.left >= 0 &&
          rect.bottom <=
            (window.innerHeight || document.documentElement.clientHeight) &&
          rect.right <=
            (window.innerWidth || document.documentElement.clientWidth)
        );
      }

      function animateCounter(counter) {
        const target = +counter.getAttribute("data-count");
        let count = 0;
        const duration = 2000; // duraci√≥n total en ms
        const increment = target / (duration / 20); // velocidad

        const updateCount = () => {
          count += increment;
          if (count < target) {
            counter.innerText = Math.floor(count);
            requestAnimationFrame(updateCount);
          } else {
            counter.innerText = target;
          }
        };

        updateCount();
      }

      // Ejecutar cuando el DOM est√© listo
      document.addEventListener("DOMContentLoaded", () => {
        const counters = document.querySelectorAll(".counter-value");
        let triggered = false;

        function checkAnimation() {
          if (!triggered && counters.length > 0 && isInViewport(counters[0])) {
            counters.forEach((counter) => animateCounter(counter));
            triggered = true;
          }
        }

        window.addEventListener("scroll", checkAnimation);
        checkAnimation(); // por si ya est√° visible al cargar
      });

      window.addEventListener("scroll", function () {
        var header = document.querySelector("header");
        header.classList.toggle("abajo", window.scrollY > 0);
      });

      const sections = document.querySelectorAll("section[id]");
      const navLinks = document.querySelectorAll(".navbar ul li a");

      window.addEventListener("scroll", () => {
        let scrollY = window.scrollY;

        sections.forEach((section) => {
          const sectionTop = section.offsetTop - 100; // ajustar si hay header fijo
          const sectionHeight = section.offsetHeight;
          const sectionId = section.getAttribute("id");

          if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
            navLinks.forEach((link) => {
              link.classList.remove("active");
              if (link.getAttribute("href") === "#" + sectionId) {
                link.classList.add("active");
              }
            });
          }
        });
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        console.log("üî• scripts.js cargado correctamente desde HTML");

        const form = document.getElementById("contact-form");
        console.log("üìù Formulario encontrado:", form);

        if (form) {
          form.addEventListener("submit", function (event) {
            event.preventDefault();
            console.log("üöÄ Formulario interceptado");

            const formData = new FormData(form);

            fetch(form.action, {
              method: "POST",
              body: formData,
            })
              .then((response) => {
                console.log("üîç Respuesta cruda:", response);
                if (response.status === 204) {
                  return { success: true };
                }
                return response.json();
              })
              .then((data) => {
                console.log("üì¶ Data recibida:", data);
                if (data.success) {
                  Swal.fire({
                    icon: "success",
                    title: "Mensaje enviado",
                    text: "Tu mensaje ha sido enviado correctamente.",
                    showConfirmButton: false,
                    timer: 2000,
                    toast: true,
                    position: "top-end",
                    background: "#f8f9fa",
                  });
                  form.reset();
                } else {
                  Swal.fire({
                    icon: "error",
                    title: "Error",
                    text: data.error || "Ocurri√≥ un error.",
                    confirmButtonText: "OK",
                  });
                }
              })
              .catch((error) => {
                console.error("‚ùå Error:", error);
                Swal.fire({
                  icon: "error",
                  title: "Error",
                  text: "No se pudo enviar el mensaje. Intenta de nuevo m√°s tarde.",
                  confirmButtonText: "Entendido",
                });
              });
          });
        }
      });
    </script>
  </body>
</html>
